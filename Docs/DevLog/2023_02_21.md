# **2023/02/20 ~ 2023/02/27**

-   윈도우, ImGui 관련 코드 작업

-   KeySet 클래스 구현 중

-   OpenGL 렌더 시스템 구현
    - Mesh, Shader

## **폴더 구조 변경**

-   Commons

    -   상수, 태그, 자료구조 등 공통적으로 사용하는 것들

-   Components

    -   entt 의 컴포넌트로 사용되는 것

-   Editor

    -   창과 gui 에 관한 것들

-   Helper

    -   시스템에서 사용할 entity를 준비시켜주는 것

-   Systems

    -   entity Component 처리

-   Render
    -   렌더링 관련 클래스들

## **헤더 파일 규칙 설정**

-   h : C++ 소스를 가진 헤더파일
-   hpp : C++ 소스를 가지지 않는 헤더파일
    -   struct or 상수 or 인터페이스 용 클래스

## **메모**

-   게임엔진과 유사한 구조로 개발하기 위해 에디터랑 다른 로직이랑 분리

    -   에디터를 위한 마우스 키보드 등 이벤트를 glfw 가 아닌 imgui에 두는것이 좋음
    -   glfw에는 게임 로직을 위한 마우스, 키보드 등 이벤트를 넣어야함

-   애니메이션 툴에서 가장 많이 렌더링 되는 것은 bipyramid
    -   인스턴스 렌더링을 더 효과적으로 하기 위해 하나의 큰 배열로 애니메이션 본 변환행렬들을 저장해야함.
    -   이때 자료구조는 ? std::vector를 사용하는 것이 좋다고 생각 : 모델 추가는 그냥 뒤에 행렬을 넣으면 되고, 모델 삭제는 그렇게 자주 일어나는 일이 아니므로 O(N) 시간 복잡도 충분함

## **고민**

-   render 관련

    -   shader를 어떻게?

        -   태그로 관리해서 태그로 쿼리 및 셰이더 바인딩, 드로우 DynamicModel, StaticModel
        -

    -   Mesh, Material

### **루프 업데이트 순서**

1. transform 업데이트
2. 애니메이션 업데이트
3. 장면 렌더링
4. GUI 렌더링 및 인풋 이벤트
    - 애니메이션 수정
    - transform 수정

순열 조합 부분집합 개념 및 구현 및 활용 예시 시험

### **객체들**

- Mesh 를 일반화 시키기 위해서 어떻게?
    - 각 API의 싱글턴 메니저를 통해, 메시를 생성
    - 각 API에서 Mesh를 렌더링하기위해 필요한 정보가 다를 수 있음
    - 이러한 정보들을 싱글턴 메니저에서 관리, 이 정보에 대한 키값 (인덱스) 를 Mesh 안에 두어 접근 가능하게

- id 와 handle 
    - handle 은 API(OpenGL 등)가 붙인 번호 
    - id는 그렇지 않음 

### **추상 팩터리 패턴과 RenderAPI 클래스**

- OpenGL, DirectX 등의 렌더 API를 추상화 시키기 위해 RenderAPI 클래스를 만듬
- RenderAPI 는 추상 팩터리 패턴을 사용하여, 각 API에 맞는 클래스를 생성하게 구현 중

## **Entt 블로그글**

-  [ecs-baf](https://skypjack.github.io/2019-02-14-ecs-baf-part-1/)
    - 컴포넌트 기반 프로그래밍은 코드를 유연하게 만들고, 개발 중 반복 속도를 높여줌